{% extends "tcms_master.html" %}
{% load report_tags %}
{% block subtitle %}Components Report - {{ product }}{% endblock %}

{% block custom_javascript %}
<script type="text/javascript" src="{{ STATIC_URL }}js/report.js"></script>
<script type="text/javascript">
Nitrate.Utils.after_page_load(Nitrate.Report.List.on_load);
</script>
{% endblock %}

{% block page_content %}
	<nav aria-label="breadcrumb">
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="{% url "nitrate-index" %}">Home</a></li>
			<li class="breadcrumb-item"><a href="{% url "report-overall" %}">Reporting</a></li>
			<li class="breadcrumb-item active" aria-current="page">{{ product }}</li>
		</ol>
	</nav>
	<div class="container">
        <div class="row">
            <div>
                {% include 'report/nav.html' %}
                {% if component %}
                    <div class="report">
                        <h2>Component: {{ component }}</h2>
                        {% include "report/case_runs_status_subtotal.html" %}
                    </div>
                {% endif %}
                <table class="table table-striped table-bordered" style="margin-top: 15px">
                    <thead>
                    <tr>
                        <th>Component</th>
                        <th>Case Runs</th>
                        <th>Case Runs Progress</th>
                        <th>Failed Case Runs</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for component in components %}
                        <tr>
                            <td>
                                <a href="?component_id={{ component.id }}">{{ component }}</a>
                            </td>
                            <td>
                                <span class="">{{ component.case_runs_count }}</span>
                            </td>
                            <td>
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" style="width: {{ component.finished_case_run_percent|default:'0' }}%"
                                        aria-valuenow="{{ component.finished_case_run_percent|default:'0' }}" aria-valuemin="0" aria-valuemax="100">
                                        <span class="pl-1">{{ component.finished_case_run_percent|default:'0' }}%</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                {% if component.failed_case_run_count %}
                                    <span class="label label-danger">{{ component.failed_case_run_count|default:'0' }} Failed</span>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
		</div>
	</div>
{% endblock %}
