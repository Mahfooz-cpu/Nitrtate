{% load comments %}
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th width="6%">Case ID</th>
            <th width="6%">Case Run ID</th>
            <th width="55%">Summary</th>
            <th>Category</th>
            <th>Tester</th>
            <th>Issues</th>
            <th width="10%">Lastest Execute Time</th>
        </tr>
    </thead>
	{% for test_case_run in case_runs %}
	<tr>
		<td><a href="{{ test_case_run.case.get_absolute_url }}">{{ test_case_run.case.pk }}</a></td>
		<td><a href="{% url "run-get" test_case_run.run_id %}#caserun_{{ test_case_run.pk }}">{{ test_case_run.pk }}</a></td>
		<td>{{ test_case_run.case.summary }}</td>
		<td>{{ test_case_run.case.category }}</td>
		<td>{{ test_case_run.tested_by }}</td>
		<td>
		{% for issue in test_case_run.issues.all %}
			<a href="{{ issue.get_absolute_url }}">{{ issue.issue_key }}</a>,
		{% empty %}
			<span class="grey"></span>
		{% endfor %}
		</td>
		<td valign="top" >{{ test_case_run.close_date }}</td>
	</tr>

	{% if test_case_run.comments.all %}
    <tr>
        <td colspan="7">Comments:</td>
    </tr>
    {% for comment in test_case_run.comments.all %}
    <tr class="border-bottom">
        <td valign="top" colspan="7">{{ comment.comment|urlize|linebreaksbr }}<span class="grey">[{{ comment.username }} {{ comment.submit_date }}]</span></td>
    </tr>
    {% endfor %}
	{% endif %}

	{% if test_case_run.issues.all %}
	<tr>
		<td colspan="7">Issues:</td>
	</tr>
	{% for issue in test_case_run.issues.all %}
	<tr class="border-bottom">
		<td valign="top" colspan="7"><a href="{{ issue.get_absolute_url }}">{{ issue.issue_key }}</a> </td>
	</tr>
	{% endfor %}
	{% endif %}

	{% empty %}
	<tr><td align="center" colspan="7"><span class="grey">No data.</span></td></tr>
	{% endfor %} {# end of looping case runs #}
</table>
