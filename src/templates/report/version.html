{% extends "tcms_master.html" %}
{% load report_tags %}

{% block subtitle %}Versions Report- {{ product }}{% endblock %}

{#{% block custom_stylesheet %}#}
{#<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}style/nitrate.css">#}
{#{% endblock %}#}

{% block custom_javascript %}
<script type="text/javascript" src="{{ STATIC_URL }}js/report.js"></script>
<script type="text/javascript">
Nitrate.Utils.after_page_load(Nitrate.Report.List.on_load);
</script>
{% endblock %}

{% block page_content %}
	<nav aria-label="breadcrumb">
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="{% url "nitrate-index" %}">Home</a></li>
			<li class="breadcrumb-item"><a href="{% url "report-overall" %}">Reporting</a></li>
			<li class="breadcrumb-item active" aria-current="page">Product - {{ product }}</li>
		</ol>
	</nav>
	<div class="container">
	<div class="row">
		<div>
			{% include 'report/nav.html' %}
			{% if version %}
				<h2 class="pt-3">Version: {{ version }}</h2>
				{% include "report/case_runs_status_subtotal.html" %}
			{% endif %}
			<table class="table table-striped table-bordered" style="margin-top: 15px">
				<thead>
				<tr>
					<th>Version</th>
					<th>Plans</th>
					<th>Runs (Running/Finished)</th>
					<th>Cases</th>
					<th>Case Runs Progress</th>
					<th>Failed Case Runs</th>
				</tr>
				</thead>
				<tbody>
				{% for version in versions %}
					<tr>
						<td>
							<a href="?version_id={{ version.pk }}">{{ version }}</a>
						</td>
						<td>{{ version.plans_count }}</td>
						<td>{{ version.running_runs_count }}/{{ version.finished_runs_count }}</td>
						<td>{{ version.cases_count }}</td>
						<td>
							<div class="progress">
								<div class="progress-bar" role="progressbar" style="width: {{ version.case_run_percent|default:'0' }}%"
									 aria-valuenow="{{ version.case_run_percent|default:'0' }}" aria-valuemin="0" aria-valuemax="100">
									<span class="pl-1">{{ version.case_run_percent|default:'0' }}%</span>
								</div>
							</div>
						</td>
						<td>
							{% if version.failed_case_runs_count  %}
								<span class="label label-danger">{{ version.failed_case_runs_count|default:'0' }} Failed</span>
							{% endif %}
						</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
		</div>
	</div>
{% endblock %}
