{% extends "search_content.html" %}

{% block toolbar_actions %}
	<form id="plans_form" class="toolbar-pf-actions">
		<div class="form-group toolbar-pf-find">
			<button type="button" class="btn btn-link btn-find" data-toggle="modal" data-target="#searchRunsModal">
				<span class="fa fa-search"></span>
			</button>
		</div>
		<div class="form-group">
			<button type="button" title="clone selected test runs" class="btn btn-default js-clone-testruns" data-param='{% url "runs-clone" %}' disabled>
				<i class="far fa-clone"></i> Clone
			</button>
		</div>
		<div class="toolbar-pf-action-right">
			<div class="form-group">
				{% if request.user.is_authenticated %}
					<a class="btn btn-default" href="{% url "runs-all" %}?case_run__assignee={{ user.email }}">View My Assigned Runs</a>
				{% endif %}
				<a title="List all the plans" class="btn btn-default"
				   href="?summary=&plan=&product_id=&env_group_id=&manager=&status=">View All Runs</a>
			</div>
		</div>
	</form>
{% endblock %}

{% block empty_notify %}
	<div class="blank-slate-pf table-view-pf-empty" id="emptyState1">
		<div class="blank-slate-pf-icon">
			<i class="fas fa-search"></i>
		</div>
		<h1>
			Select criteria to search test runs.
		</h1>
		<div class="blank-slate-pf-secondary-action">
			<button type="button" class="btn btn-primary btn-lg btn-find" data-toggle="modal" data-target="#searchRunsModal">
				Search Test Runs
			</button>
		</div>
	</div>
{% endblock %}

{% block search_result_table %}
	<table id="testruns_table" class="table table-striped table-bordered table-hover dataTable no-footer">
		<thead>
		<tr>
			{# TODO: set column width in CSS #}
			<th class="col-run-selector"><input id='id_check_all_runs' type="checkbox" title="Select all/Select none" /></th>
			<th class="col-run-id">ID</th>
			<th>Summary</th>
			<th class="col-run-manager">Manager</th>
			<th class="col-run-default-tester">Default Tester</th>
			<th style="display:none" id="col_plan_head" >Plan</th>
			<th class="col-run-product">Product</th>
			<th class="col-run-product-version">Product Version</thcl>
			<th title='Plan Environment Group' class="col-run-environment">Environment</th>
			<th class="col-run-cases">Cases</th>
			<th class="col-run-status">Status</th>
			<th class="col-run-completed-progress">Completed</th>
		</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
{% endblock %}

{% block search_criteria_dialog %}
	<div class="modal fade" id="searchRunsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						<span class="pficon pficon-close"></span>
					</button>
					<h4 class="modal-title" id="myModalLabel">Search Test Runs</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal js-search-form" method="get" action="{% url "runs-all" %}">
						<input type="hidden" name="a" value="search">
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.summary.name }}">
								{{ search_form.summary.label }}
							</label>
							<div class="col-sm-9">{{ search_form.summary }}</div>
						</div>
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.product.name }}">
								{{ search_form.product.label }}
							</label>
							<div class="col-sm-9">{{ search_form.product }}</div>
						</div>
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.env_group.name }}">
								{{ search_form.env_group.label }}
							</label>
							<div class="col-sm-9">{{ search_form.env_group }}</div>
						</div>
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.people.name }}">
								{{ search_form.people.label }}
							</label>
							<div class="clearfix col-sm-9">
								{{ search_form.people_type }}
								{{ search_form.people }}
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.case_run__assignee.name }}">
								{{ search_form.case_run__assignee.label }}
							</label>
							<div class="col-sm-9">{{ search_form.case_run__assignee }}</div>
						</div>
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.plan.name }}">
								{{ search_form.plan.label }}
							</label>
							<div class="col-sm-9">{{ search_form.plan }}</div>
						</div>
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.product_version.name }}">
								{{ search_form.product_version.label }}
							</label>
							<div class="col-sm-9">{{ search_form.product_version }}</div>
						</div>
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.build.name }}">
								{{ search_form.build.label }}
							</label>
							<div class="col-sm-9">{{ search_form.build }}</div>
						</div>
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.build.name }}">
								{{ search_form.build.label }}
							</label>
							<div class="col-sm-9">{{ search_form.build }}</div>
						</div>
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.status.name }}">
								{{ search_form.status.label }}
							</label>
							<div class="col-sm-9">{{ search_form.status }}</div>
						</div>
						<div class="form-group">
							<label class="col-sm-3 control-label" for="id_{{ search_form.tag__name__in.name }}">
								{{ search_form.tag__name__in.label }}
							</label>
							<div class="col-sm-9">{{ search_form.tag__name__in }}</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					<button type="button" class="btn btn-primary js-btn-search-runs" onclick="jQ('.js-search-form').submit()">Search</button>
				</div>
			</div>
		</div>
	</div>
{% endblock %}